<?xml version="1.0" encoding="utf-8"?>
<search> 
  
  
    
    <entry>
      <title>部署Chemex资产管理系统</title>
      <link href="/2023/01/25/chemex%E8%B5%84%E4%BA%A7%E7%AE%A1%E7%90%86/"/>
      <url>/2023/01/25/chemex%E8%B5%84%E4%BA%A7%E7%AE%A1%E7%90%86/</url>
      
        <content type="html"><![CDATA[<h2 id="使用docker部署"><a href="#使用docker部署" class="headerlink" title="使用docker部署"></a>使用docker部署</h2><h3 id="centos7系统安装"><a href="#centos7系统安装" class="headerlink" title="centos7系统安装"></a><strong>centos7系统安装</strong></h3><h4 id="一、安装Docker"><a href="#一、安装Docker" class="headerlink" title="一、安装Docker"></a>一、安装Docker</h4><ol><li><strong>部署docker的yum源</strong></li></ol><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">step 1: 安装必要的一些系统工具</span></span><br><span class="line">sudo yum install -y yum-utils device-mapper-persistent-data lvm2</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">Step 2: 添加软件源信息</span></span><br><span class="line">sudo yum-config-manager --add-repo https://mirrors.aliyun.com/docker-ce/linux/centos/docker-ce.repo</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">Step 3</span></span><br><span class="line">sudo sed -i &#x27;s+download.docker.com+mirrors.aliyun.com/docker-ce+&#x27; /etc/yum.repos.d/docker-ce.repo</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">Step 4: 更新并安装Docker-CE</span></span><br><span class="line">sudo yum makecache fast</span><br><span class="line">sudo yum -y install docker-ce</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">Step 4: 开启Docker服务</span></span><br><span class="line">sudo service docker start</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">注意：</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">官方软件源默认启用了最新的软件，您可以通过编辑软件源的方式获取各个版本的软件包。例如官方并没有将测试版本的软件源置为可用，您可以通过以下方式开启。同理可以开启各种测试版本等。</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">vim /etc/yum.repos.d/docker-ce.repo</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">  将[docker-ce-test]下方的enabled=0修改为enabled=1</span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash"></span></span><br><span class="line"><span class="language-bash"><span class="comment"># 安装指定版本的Docker-CE:</span></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">Step 1: 查找Docker-CE的版本:</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">yum list docker-ce.x86_64 --showduplicates | <span class="built_in">sort</span> -r</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">  Loading mirror speeds from cached hostfile</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">  Loaded plugins: branch, fastestmirror, langpacks</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">  docker-ce.x86_64            17.03.1.ce-1.el7.centos            docker-ce-stable</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">  docker-ce.x86_64            17.03.1.ce-1.el7.centos            @docker-ce-stable</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">  docker-ce.x86_64            17.03.0.ce-1.el7.centos            docker-ce-stable</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">  Available Packages</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">Step2: 安装指定版本的Docker-CE: (VERSION例如上面的17.03.0.ce.1-1.el7.centos)</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">sudo yum -y install docker-ce-[VERSION]</span></span><br></pre></td></tr></table></figure><h4 id="1-关闭防火墙-关闭开机自启"><a href="#1-关闭防火墙-关闭开机自启" class="headerlink" title="1.关闭防火墙,关闭开机自启"></a>1.关闭防火墙,关闭开机自启</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">关闭防火墙</span><br><span class="line">systemclt stop firewalld</span><br><span class="line">关闭防火墙开机自启</span><br><span class="line">systemctl disable firewalld</span><br></pre></td></tr></table></figure><h4 id="2-临时和永久SElinux"><a href="#2-临时和永久SElinux" class="headerlink" title="2.临时和永久SElinux"></a>2.临时和永久SElinux</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">临时关闭selinux</span><br><span class="line">setenforce 0</span><br><span class="line">永久关闭selinux</span><br><span class="line">vi /etc/selinux/config</span><br><span class="line">SELINUX=enforcing 改为 SELINUX=disabled</span><br></pre></td></tr></table></figure><h3 id="二、安装数据库MariaDB-启动数据库，并设置为开机启动"><a href="#二、安装数据库MariaDB-启动数据库，并设置为开机启动" class="headerlink" title="二、安装数据库MariaDB,启动数据库，并设置为开机启动"></a>二、安装数据库MariaDB,启动数据库，并设置为开机启动</h3><h4 id="1-安装数据库"><a href="#1-安装数据库" class="headerlink" title="1.安装数据库"></a>1.安装数据库</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">安装mariadb数据库</span><br><span class="line">yum install -y mariadb mariadb-server</span><br><span class="line">启动mariadb</span><br><span class="line">systemctl start mariadb</span><br><span class="line">开启mariadb开机自启</span><br><span class="line">systemctl enable mariadb</span><br></pre></td></tr></table></figure><h4 id="2-设置数据库密码，开启访问权限"><a href="#2-设置数据库密码，开启访问权限" class="headerlink" title="2.设置数据库密码，开启访问权限"></a>2.设置数据库密码，开启访问权限</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ~]# mysql -uroot</span><br><span class="line">设置root用户密码</span><br><span class="line">SET password=PASSWORD(&#x27;123456&#x27;);</span><br><span class="line">开启所有IP可以访问</span><br><span class="line"><span class="meta prompt_">MariaDB[(none)]&gt;</span><span class="language-bash">GRANT ALL PRIVILEGES ON *.* TO <span class="string">&#x27;root&#x27;</span>@<span class="string">&#x27;%&#x27;</span> IDENTIFIED BY <span class="string">&#x27;123456&#x27;</span> WITH GRANT OPTION;</span></span><br></pre></td></tr></table></figure><h4 id="3-创建数据库chemex"><a href="#3-创建数据库chemex" class="headerlink" title="3.创建数据库chemex"></a>3.创建数据库chemex</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">创建chemex数据库</span><br><span class="line"><span class="meta prompt_">MariaDB[(none)]&gt;</span><span class="language-bash">create database chemex;</span></span><br></pre></td></tr></table></figure><h3 id="三、安装Docker，下载chemex镜像"><a href="#三、安装Docker，下载chemex镜像" class="headerlink" title="三、安装Docker，下载chemex镜像"></a>三、安装<a href="https://so.csdn.net/so/search?q=Docker&spm=1001.2101.3001.7020">Docker</a>，下载chemex镜像</h3><h4 id="1-安装docker，下载镜像，启动docker容器"><a href="#1-安装docker，下载镜像，启动docker容器" class="headerlink" title="1.安装docker，下载镜像，启动docker容器"></a>1.安装docker，下载镜像，启动docker容器</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">安装docker</span><br><span class="line">yum install -y docker</span><br><span class="line">启动docker</span><br><span class="line">systemctl start docker</span><br><span class="line">开启docker开机自启</span><br><span class="line">systemctl enable docker</span><br><span class="line">下载chemex镜像</span><br><span class="line">docker pull xiangwb/chemex</span><br><span class="line">启动chemex镜像</span><br><span class="line">docker run -itd -e DB_HOST=172.20.46.176 \</span><br><span class="line">-e DB_PORT=3306 \</span><br><span class="line">-e DB_DATABASE=chemex \</span><br><span class="line">-e DB_USERNAME=root \</span><br><span class="line">-e DB_PASSWORD=123456 \</span><br><span class="line">--name chemex \</span><br><span class="line">-p8888:8000 xiangwb/chemex:latest</span><br></pre></td></tr></table></figure><h5 id="迁移数据库"><a href="#迁移数据库" class="headerlink" title="迁移数据库"></a>迁移数据库</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"># 进入容器内部</span><br><span class="line">docker exec -it chemex /bin/bash</span><br><span class="line"># 执行迁移数据库</span><br><span class="line">php artisan migrate</span><br><span class="line"># 安装</span><br><span class="line">php artisan chemex:install</span><br><span class="line">ctrl+q+p推出</span><br></pre></td></tr></table></figure><h4 id="2-查看docker状态"><a href="#2-查看docker状态" class="headerlink" title="2.查看docker状态"></a>2.查看docker状态</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ~]# docker ps</span><br><span class="line">CONTAINER ID        IMAGE               COMMAND                  CREATED             STATUS              PORTS                NAMES</span><br><span class="line">bbb600bfebc5        celaraze/chemex     &quot;/docker-entrypoin...&quot;   2 hours ago         Up 2 hours          0.0.0.0:80-&gt;80/tcp   hopeful_clarke</span><br></pre></td></tr></table></figure><h3 id="四、访问测试"><a href="#四、访问测试" class="headerlink" title="四、访问测试"></a>四、访问测试</h3><h4 id="登录网址http-localhost-8888"><a href="#登录网址http-localhost-8888" class="headerlink" title="登录网址http://localhost:8888"></a>登录网址<a href="http://localhost:8888/">http://localhost:8888</a></h4><h4 id="初始账号密码-admin-x2F-admin"><a href="#初始账号密码-admin-x2F-admin" class="headerlink" title="初始账号密码:admin&#x2F;admin"></a>初始账号密码:admin&#x2F;admin</h4>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>测试</title>
      <link href="/2023/01/25/%E6%B5%8B%E8%AF%952/"/>
      <url>/2023/01/25/%E6%B5%8B%E8%AF%952/</url>
      
        <content type="html"><![CDATA[<p><img src="https://cdn.jsdelivr.net/gh/ktoucha/blogimage@main/img/58840634_p0.jpg" alt="58840634_p0"></p><p><img src="https://cdn.jsdelivr.net/gh/ktoucha/blogimage@main/img/69888657_p0.png" alt="69888657_p0"><img src="C:\Users\12480\OneDrive\桌面\img\86519098_p0.png" alt="86519098_p0"><img src="C:\Users\12480\OneDrive\桌面\img\64344045_p0.jpg" alt="64344045_p0"><img src="https://cdn.jsdelivr.net/gh/ktoucha/blogimage@main/img/58769465_p0.png" alt="58769465_p0"></p>]]></content>
      
      
      
    </entry>
    
    
  
  
</search>
